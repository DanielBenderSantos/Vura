<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>✨ Mapa Natal Profissional ✨</title>

<style>
  body {
    margin: 0;
    background: radial-gradient(circle, #111827, #020617);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, sans-serif;
    color: white;
  }

  svg {
    width: 600px;
    height: 600px;
  }

  text {
    fill: white;
    font-size: 12px;
    text-anchor: middle;
    dominant-baseline: middle;
  }

  .planet {
    font-size: 16px;
  }
</style>
</head>

<body>

<svg viewBox="0 0 600 600" id="mapa">
  <g id="base"></g>
  <g id="graus"></g>
  <g id="casas"></g>
  <g id="aspectos"></g>
  <g id="planetas"></g>
</svg>

<script>
// =====================
// DADOS (exemplo real)
// =====================
const data = {
  planets: [
    { id:"sun", symbol:"☉", abs_pos:154.5, retrograde:false },
    { id:"moon", symbol:"☽", abs_pos:350.2, retrograde:false },
    { id:"mercury", symbol:"☿", abs_pos:143.4, retrograde:false },
    { id:"venus", symbol:"♀", abs_pos:142.5, retrograde:true },
    { id:"mars", symbol:"♂", abs_pos:236.5, retrograde:false },
    { id:"jupiter", symbol:"♃", abs_pos:35.0, retrograde:true },
    { id:"saturn", symbol:"♄", abs_pos:47.1, retrograde:false },
    { id:"uranus", symbol:"♅", abs_pos:314.0, retrograde:true },
    { id:"neptune", symbol:"♆", abs_pos:302.1, retrograde:true },
    { id:"pluto", symbol:"♇", abs_pos:247.7, retrograde:false }
  ],

  houses: [
    { house:1, abs_pos:97.9 },
    { house:2, abs_pos:131.7 },
    { house:3, abs_pos:167.6 },
    { house:4, abs_pos:201.0 },
    { house:5, abs_pos:229.2 },
    { house:6, abs_pos:253.8 },
    { house:7, abs_pos:277.9 },
    { house:8, abs_pos:311.7 },
    { house:9, abs_pos:347.6 },
    { house:10, abs_pos:21.0 },
    { house:11, abs_pos:49.2 },
    { house:12, abs_pos:73.8 }
  ],

  aspects: [
    { p1:"sun", p2:"mars", type:"square" },
    { p1:"sun", p2:"jupiter", type:"trine" },
    { p1:"moon", p2:"saturn", type:"sextile" }
  ]
};

// =====================
// FUNÇÕES
// =====================
const svg = document.getElementById("mapa");
const CX = 300;
const CY = 300;

function polar(angle, radius) {
  const rad = (angle - 90) * Math.PI / 180;
  return {
    x: CX + radius * Math.cos(rad),
    y: CY + radius * Math.sin(rad)
  };
}

function circle(r, stroke, w) {
  return `<circle cx="${CX}" cy="${CY}" r="${r}"
    fill="none" stroke="${stroke}" stroke-width="${w}" />`;
}

// =====================
// BASE
// =====================
document.getElementById("base").innerHTML = `
  ${circle(290, "#9333ea", 4)}
  ${circle(250, "#444", 1)}
  ${circle(200, "#444", 1)}
`;

// =====================
// GRAUS
// =====================
let graus = "";
for (let i = 0; i < 360; i++) {
  const r1 = i % 30 === 0 ? 250 : 270;
  const r2 = 290;
  const a = polar(i, r1);
  const b = polar(i, r2);

  graus += `
    <line x1="${a.x}" y1="${a.y}"
          x2="${b.x}" y2="${b.y}"
          stroke="#666"
          stroke-width="${i % 30 === 0 ? 2 : 0.5}"/>
  `;
}
document.getElementById("graus").innerHTML = graus;

// =====================
// CASAS
// =====================
let casas = "";
data.houses.forEach(h => {
  const p = polar(h.abs_pos, 200);
  casas += `
    <line x1="${CX}" y1="${CY}"
          x2="${p.x}" y2="${p.y}"
          stroke="${h.house === 1 || h.house === 10 ? '#fff' : '#777'}"
          stroke-width="${h.house === 1 || h.house === 10 ? 2 : 1}"/>
  `;
});
document.getElementById("casas").innerHTML = casas;

// =====================
// ASPECTOS
// =====================
const colors = {
  square:"#ef4444",
  opposition:"#ef4444",
  trine:"#22c55e",
  sextile:"#3b82f6",
  conjunction:"#999"
};

let aspectos = "";
data.aspects.forEach(a => {
  const p1 = data.planets.find(p => p.id === a.p1);
  const p2 = data.planets.find(p => p.id === a.p2);
  if (!p1 || !p2) return;

  const A = polar(p1.abs_pos, 180);
  const B = polar(p2.abs_pos, 180);

  aspectos += `
    <line x1="${A.x}" y1="${A.y}"
          x2="${B.x}" y2="${B.y}"
          stroke="${colors[a.type]}"
          stroke-width="1"
          opacity="0.7"/>
  `;
});
document.getElementById("aspectos").innerHTML = aspectos;

// =====================
// PLANETAS
// =====================
let planetas = "";
data.planets.forEach(p => {
  const pos = polar(p.abs_pos, 225);
  planetas += `
    <text x="${pos.x}" y="${pos.y}" class="planet">
      ${p.symbol}${p.retrograde ? "℞" : ""}
    </text>
  `;
});
document.getElementById("planetas").innerHTML = planetas;

</script>

</body>
</html>
